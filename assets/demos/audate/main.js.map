{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/components/audate-root/app-routing.module.ts","./src/app/components/audate-root/app.component.ts","./src/app/components/audate-root/app.component.html","./src/app/components/audate-root/app.module.ts","./src/app/components/audio-waves/audio-wave.ts","./src/app/components/audio-waves/audio-waves.component.ts","./src/app/components/audio-waves/audio-waves.component.html","./src/app/components/content-popup/content-popup.component.ts","./src/app/components/content-popup/content-popup.component.html","./src/app/components/input-plate/input-plate.component.ts","./src/app/components/input-plate/input-plate.component.html","./src/app/components/onboarding/onboarding.component.ts","./src/app/components/onboarding/onboarding.component.html","./src/app/components/permission-request/permission-request.component.ts","./src/app/components/permission-request/permission-request.component.html","./src/app/components/quick-settings/quick-settings.component.ts","./src/app/components/quick-settings/quick-settings.component.html","./src/app/components/transcript/transcript.component.ts","./src/app/components/transcript/transcript.component.html","./src/app/components/voice-search/voice-search.component.ts","./src/app/components/voice-search/voice-search.component.html","./src/app/model/search-engine.ts","./src/app/services/analytics.service.ts","./src/app/services/i18n-mssg.ts","./src/app/services/i18n.service.ts","./src/app/services/input-device.service.ts","./src/app/services/launch-target.service.ts","./src/app/services/locale/locale-properties.ts","./src/app/services/locale/locale.service.ts","./src/app/services/logging/console-logger.ts","./src/app/services/logging/logging.service.ts","./src/app/services/logging/remote-logger.ts","./src/app/services/recognition/browser-recognition-provider.ts","./src/app/services/recognition/recognition-state.ts","./src/app/services/recognition/recognition.service.ts","./src/app/services/search-engine.service.ts","./src/app/services/storage/chrome-storage-provider.ts","./src/app/services/storage/local-storage-provider.ts","./src/app/services/storage/storage.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ContentPopupComponent } from '../content-popup/content-popup.component';\nimport { OnboardingComponent } from '../onboarding/onboarding.component';\nimport { PermissionRequestComponent } from '../permission-request/permission-request.component';\nimport { VoiceSearchComponent } from '../voice-search/voice-search.component';\nimport { AppComponent } from './app.component';\n\nconst routes: Routes = [\n  {\n    path: 'popup',\n    component: VoiceSearchComponent,\n  },\n  {\n    path: 'popup?demo=true',\n    component: VoiceSearchComponent,\n  },\n  {\n    path: 'content-popup',\n    component: ContentPopupComponent,\n  },\n  {\n    path: 'request-permissions',\n    component: PermissionRequestComponent,\n  },\n  {\n    path: 'onboard',\n    component: OnboardingComponent,\n  },\n  {\n    path: '',\n    component: AppComponent,\n    pathMatch: 'full',\n  },\n  {\n    path: '**',\n    component: AppComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PrimeNGConfig } from 'primeng/api';\nimport { AnalyticsService } from 'src/app/services/analytics.service';\nimport { Logger } from 'src/app/services/logging/logger';\nimport { LoggingService } from 'src/app/services/logging/logging.service';\n\n@Component({\n  selector: 'audate-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class AppComponent implements OnInit {\n  logger: Logger;\n\n  constructor(\n    private router: Router,\n    private primengConfig: PrimeNGConfig,\n    private analytics: AnalyticsService,\n    loggingService: LoggingService\n  ) {\n    this.logger = loggingService.getLogger('audate-root');\n  }\n\n  ngOnInit() {\n    this.primengConfig.ripple = true;\n    this.addExtensionRedirects();\n    this.analytics.logStart(\"AudateRoot#onInit\");\n  }\n\n  /**\n   * Enables navigating to different pages in chrome extension\n   * where paths are not supported but fragments are.\n   * This function would redirect index.html/#popup\n   * (or simply /#popup) to the path /popup.\n   */\n  addExtensionRedirects() {\n    const fragment = window.location.href.split('#')[1];\n    const matchingRoute = this.router.config\n      .map((r) => r.path)\n      .find((p) => p === fragment);\n\n    if (matchingRoute) {\n      this.router.navigateByUrl(fragment, { skipLocationChange: true });\n    } else {\n      this.logger.error('Invalid fragment ', fragment);\n    }\n  }\n}\n","<router-outlet></router-outlet>\n","import {\n  ApplicationRef,\n  DoBootstrap,\n  ErrorHandler,\n  Injector,\n  NgModule,\n} from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FormsModule } from '@angular/forms';\nimport { APP_BASE_HREF } from '@angular/common';\n\nimport { ButtonModule } from 'primeng/button';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { DialogModule } from 'primeng/dialog';\nimport { CardModule } from 'primeng/card';\nimport { CarouselModule } from 'primeng/carousel';\nimport * as Sentry from '@sentry/angular-ivy';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { VoiceSearchComponent } from '../voice-search/voice-search.component';\nimport { InputPlateComponent } from '../input-plate/input-plate.component';\nimport { TranscriptComponent } from '../transcript/transcript.component';\nimport { AudioWavesComponent } from '../audio-waves/audio-waves.component';\nimport { QuickSettingsComponent } from '../quick-settings/quick-settings.component';\nimport { ContentPopupComponent } from '../content-popup/content-popup.component';\nimport { PermissionRequestComponent } from '../permission-request/permission-request.component';\nimport { Router } from '@angular/router';\nimport { OnboardingComponent } from '../onboarding/onboarding.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    VoiceSearchComponent,\n    InputPlateComponent,\n    OnboardingComponent,\n    TranscriptComponent,\n    AudioWavesComponent,\n    QuickSettingsComponent,\n    ContentPopupComponent,\n    PermissionRequestComponent,\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    ButtonModule,\n    CardModule,\n    CarouselModule,\n    DropdownModule,\n    DialogModule,\n    AppRoutingModule,\n    FormsModule,\n  ],\n  providers: [\n    {\n      provide: ErrorHandler,\n      useValue: Sentry.createErrorHandler({\n        showDialog: true,\n      }),\n    },\n    {\n      provide: Sentry.TraceService,\n      deps: [Router],\n    },\n    {\n      provide: APP_BASE_HREF,\n      useValue: '/',\n    },\n  ],\n})\nexport class AppModule implements DoBootstrap {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  constructor(private injector: Injector, trace: Sentry.TraceService) { }\n  ngDoBootstrap(appRef: ApplicationRef) {\n    if (document.querySelector('audate-root')) {\n      appRef.bootstrap(AppComponent);\n    }\n  }\n}\n","// A class for generating audio-waves inside a given Canvas element.\n\n/*\n * To test changes to this function, copy-paste this entire file here https://codepen.io/justiceo/pen/PoEVEvw.\n * and uncomment the lines below:\n * document.addEventListener(\"DOMContentLoaded\",\n *     () => {\n *         const aw = new AudioWave();\n *         aw.init(document.getElementById('canvas') as HTMLCanvasElement);\n *     }, false);\n */\nexport class AudioWave {\n  canvas!: HTMLCanvasElement;\n  renderingContext!: CanvasRenderingContext2D;\n  waves: Wave[] = [];\n\n  config!: AudioWaveConfig;\n\n  // The animation ID of the current running animation frame.\n  animationId?: number;\n\n  // TODO: Slowly add and remove nodes to avoid jank due to complete canvas redraw.\n  init(canvas: HTMLCanvasElement, config: AudioWaveConfig): boolean {\n    this.canvas = canvas;\n    this.config = config;\n    // This may be null if another context already in use, https://stackoverflow.com/a/13406681.\n    const context = this.canvas.getContext('2d');\n    if (context == null) {\n      console.error(\"Unable to obtain '2d' context for Canvas\");\n      return false;\n    }\n    this.renderingContext = context;\n    // Clear waves since #init may be called multiple times per instance.\n    this.waves = [];\n\n    // Clear animation frames.\n    if (this.animationId) {\n      window.cancelAnimationFrame(this.animationId);\n    }\n    this.resizeCanvas(this.canvas, this.config.width);\n    this.rotateCanvas(this.canvas, this.config.rotation);\n    this.config.screenColors.forEach((color) =>\n      this.waves.push(new Wave(this.canvas, color, this.config.nodeCount))\n    );\n    this.update();\n    return true;\n  }\n\n  /*\n   * This function runs the animation. To get its gist, comment out #requestAnimationFrame.\n   * It may be invoked 60x per second on 60fps browsers to update the canvas and should be as fast as possible to avoid dropping frames.\n   * count = 0;\n   */\n  private update() {\n    /*\n     * Anneal node count.\n     * each 2 seconds call the createNewObject() function\n     */\n\n    /*\n     * if (++this.count % 10 ==  0) {\n     *   this.count = 0;\n     *   if (this.nodeCount > this.targetNodeCount) {\n     *     this.waves.forEach((w) => w.pop());\n     *     this.nodeCount--;\n     *   }\n     * }\n     * TODO: Try adjusting the height via Math.sin.\n     */\n\n    this.renderingContext.fillStyle = this.config.opaqueColor;\n    this.renderingContext.globalCompositeOperation = 'source-over';\n    this.renderingContext.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    this.renderingContext.globalCompositeOperation = 'screen';\n    this.waves.forEach((wave) => {\n      wave.points.forEach((point: Point) => this.bounceY(point));\n      this.drawWave(wave);\n    });\n\n    this.animationId = requestAnimationFrame(() => this.update());\n  }\n\n  private bounceY(point: Point) {\n    // The smaller this number, the more the actual height is determined by the random yBase leading to more entropy.\n    const entropy = 20;\n    point.y =\n      (this.config.height / 2) * Math.sin(point.yBase / entropy) +\n      this.canvas.height / 2;\n\n    // Increase the randomly generated Y value with a tiny amount to avoid a repeating loop.\n    point.yBase += 0.3;\n  }\n\n  private drawWave(wave: Wave) {\n    let diff = function (a: number, b: number) {\n      return (b - a) / 2 + a;\n    };\n\n    this.renderingContext.fillStyle = wave.color;\n    this.renderingContext.beginPath();\n    this.renderingContext.moveTo(0, this.canvas.height);\n    this.renderingContext.lineTo(wave.points[0].x, wave.points[0].y);\n\n    // Draw a quadratic curve from point i to the middle of point i and i+1.\n    for (let i = 0; i < wave.points.length; i++) {\n      if (wave.points[i + 1]) {\n        // Change this to #lineTo to visualize points.\n        this.renderingContext.quadraticCurveTo(\n          wave.points[i].x,\n          wave.points[i].y,\n          diff(wave.points[i].x, wave.points[i + 1].x),\n          diff(wave.points[i].y, wave.points[i + 1].y)\n        );\n      } else {\n        this.renderingContext.lineTo(wave.points[i].x, wave.points[i].y);\n        this.renderingContext.lineTo(this.canvas.width, this.canvas.height);\n      }\n    }\n    // Join all the end points and paint.\n    this.renderingContext.closePath();\n    this.renderingContext.fill();\n  }\n\n  private resizeCanvas(canvas: HTMLCanvasElement, width?: number) {\n    if (width) {\n      canvas.width = width;\n    } else {\n      if (window.innerWidth > 1920) {\n        canvas.width = window.innerWidth;\n      } else {\n        canvas.width = 1920;\n      }\n    }\n\n    canvas.height = this.config.height;\n  }\n\n  private rotateCanvas(canvas: HTMLCanvasElement, rotation: number) {\n    canvas.style.transform = 'rotate(' + rotation + 'deg)';\n  }\n}\n\nclass Wave {\n  color: string;\n  points: Point[];\n  canvasWidth: number;\n  constructor(canvas: HTMLCanvasElement, color: string, nodeCount: number) {\n    this.color = color;\n    this.points = [];\n    this.canvasWidth = canvas.width;\n\n    for (let i = 0; i <= nodeCount + 2; i++) {\n      const p = new Point();\n      p.x = ((i - 1) * canvas.width) / nodeCount;\n      // p.y is derived in #bounce using this base.\n      p.yBase = Math.random() * 200;\n      this.points.push(p);\n    }\n  }\n\n  pop() {\n    const i = Math.random() * this.points.length;\n    this.points.splice(i, 1);\n    const step = this.canvasWidth / this.points.length;\n    for (let i = 0; i < this.points.length; i++) {\n      this.points[i].x = (i - 1) * step;\n    }\n  }\n}\n\n/*\n * To see this point on the canvas,\n * change #quadraticCurveTo to #lineTo in #drawWave.\n */\nclass Point {\n  x = 0;\n  y = 0;\n  yBase = 0;\n}\n\nexport interface AudioWaveConfig {\n  /*\n   * This determines the width of the canvas, and by extension the spacing between node peaks (or frequency).\n   * Set to 0 to use the full width of the window.\n   */\n  width: number;\n\n  // This determines the height of the canvas, and by extension the height (or amplitude) of the waves.\n  height: number;\n\n  // This determines the number of peaks and troughs visible at a time. 1 - flat barely overlapping waves, 100 - a riot of waves.\n  nodeCount: number;\n\n  // This is a dynamically set value. We anneal nodeCount with each frame to match targetNodeCount.\n  targetNodeCount: number;\n\n  // This is the color from which screening (or color bleaching) begins.\n  opaqueColor: string;\n\n  /*\n   * These three colors are 'screen'ed out of the topColor to create the bottom color. See https://colorblendy.com/#!/screen.\n   * To determine  what the final screened out color would be (usually close to #fff) - use a color picker :D\n   * If needed programmatically, here is the formular `Cscreen = 1 - [(1 - Ca) * (1 - Cb) * (1 - Cc)].\n   * Where Cx is a color and 1-Cx is an invertion of Cx.\n   * Based on the definition here https://developer.mozilla.org/en-US/docs/Web/CSS/blend-mode#values\n   * And https://webdesign.tutsplus.com/tutorials/blending-modes-in-css-color-theory-and-practical-application--cms-25201.\n   * For inverting a color, see https://stackoverflow.com/a/6961743.\n   */\n  screenColors: Array<string>;\n\n  // Canvas element rotation in degrees.\n  rotation: number;\n}\n\nexport const DefaultConfig: AudioWaveConfig = {\n  width: 400,\n  height: 10,\n  nodeCount: 2,\n  targetNodeCount: 2,\n  opaqueColor: '#2136BB',\n  screenColors: ['#ff0000', '#00ff00', '#0000ff'],\n  rotation: 0,\n};\n\nexport const applyConfig = (props: any) => {\n  return Object.assign({}, DefaultConfig, props) as AudioWaveConfig;\n};\n","import {\n  AfterViewInit,\n  Component,\n  HostListener,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n  ViewChild,\n} from '@angular/core';\nimport { Logger } from 'src/app/services/logging/logger';\nimport { LoggingService } from 'src/app/services/logging/logging.service';\nimport { AudioWave, AudioWaveConfig, DefaultConfig } from './audio-wave';\n\n@Component({\n  selector: 'audate-audio-waves',\n  templateUrl: './audio-waves.component.html',\n  styleUrls: ['./audio-waves.component.scss'],\n})\nexport class AudioWavesComponent implements OnInit, AfterViewInit, OnChanges {\n  logger: Logger;\n  audioWave: AudioWave;\n\n  @Input() config!: AudioWaveConfig;\n\n  @ViewChild('waveCanvas') canvasView: any;\n  constructor(loggingService: LoggingService) {\n    this.audioWave = new AudioWave();\n    this.logger = loggingService.getLogger('audio-waves');\n  }\n\n  ngOnInit(): void {\n    if (!this.config) {\n      this.config = DefaultConfig;\n    }\n  }\n\n  ngAfterViewInit() {\n    // Initialize the waves.\n    if (!this.audioWave.init(this.canvasView.nativeElement, this.config)) {\n      this.logger.error('Unable to initialize audio waves');\n    }\n  }\n\n  /** Listen for changes on the config input and update canvas. */\n  ngOnChanges(changes: SimpleChanges) {\n    for (const propName in changes) {\n      if (propName == 'config') {\n        const chng = changes[propName];\n        this.logger.debug(\n          'Updating config to curr:',\n          chng.currentValue,\n          'from prev:',\n          chng.previousValue\n        );\n        this.config = chng.currentValue as AudioWaveConfig;\n        if (this.canvasView)\n          this.audioWave.init(this.canvasView.nativeElement, this.config);\n      }\n    }\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(unusedEvent: any) {\n    this.audioWave.init(this.canvasView.nativeElement, this.config);\n  }\n\n  /*\n   * Samples here https://www.cssscript.com/tag/wave/,\n   * Desired UI - https://in.pinterest.com/pin/527836018814735661/\n   * Inspiration - https://codepen.io/justiceo/pens/loved.\n   */\n}\n","<canvas id=\"wave-canvas\" #waveCanvas></canvas>\n","import { Component, ViewEncapsulation } from '@angular/core';\n\n@Component({\n  selector: 'audate-content-popup',\n  templateUrl: './content-popup.component.html',\n  styleUrls: ['./content-popup.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class ContentPopupComponent {}\n","<p-dialog [resizable]=\"false\" position=\"topright\" [visible]=\"true\" [baseZIndex]=\"10000\">\n  <audate-voice-search></audate-voice-search>\n</p-dialog>","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnInit,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { State } from '../../services/recognition/recognition-state';\nimport { RecognitionService } from '../../services/recognition/recognition.service';\n\n@Component({\n  selector: 'audate-input-plate',\n  templateUrl: './input-plate.component.html',\n  styleUrls: ['./input-plate.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class InputPlateComponent implements OnInit, AfterViewInit {\n  listening = false;\n  showSettings = false;\n  idleTimeoutMs = 1000;\n\n  constructor(\n    private router: Router,\n    private speechRecognizer: RecognitionService,\n    private ref: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.speechRecognizer.getRecognitionState().subscribe((rstate) => {\n      switch (rstate.state) {\n        case State.UNKNOWN:\n        case State.NOT_SUPPORTED:\n        case State.PERMISSION_NOT_GRANTED:\n          this.requestPermissions();\n          break;\n        case State.LANGUAGE_NOT_SUPPORTED:\n        case State.SERVICE_NOT_ALLOWED:\n        case State.NO_AUDIO_INPUT_DEVICE:\n        case State.NO_CONNECTION:\n        case State.NO_SPEECH_DETECTED:\n        case State.IDLE:\n        case State.ABORTED:\n        case State.END:\n          this.listening = false;\n          break;\n        case State.START:\n        case State.TRANSCRIBING:\n          this.listening = true;\n          break;\n      }\n      this.ref.detectChanges();\n    });\n  }\n\n  ngAfterViewInit(): void {\n    // Trigger mic tap.\n    if (\n      this.router.url === '/onboard' ||\n      this.router.url === '/popup?demo=true'\n    ) {\n      this.showSettings = true;\n      this.ref.detectChanges();\n    } else {\n      this.micTap();\n    }\n  }\n\n  requestPermissions() {\n    setTimeout(() => {\n      const url = chrome.runtime.getURL('index.html#request-permissions');\n      chrome.tabs.create({ url: url });\n    }, this.idleTimeoutMs);\n  }\n\n  micTap(): void {\n    if (this.listening) {\n      this.speechRecognizer.stop();\n    } else {\n      this.speechRecognizer.start(false);\n    }\n  }\n\n  onGearTap() {\n    this.showSettings = !this.showSettings;\n  }\n}\n","<div id=\"audate-input-plate\">\n  <div id=\"record-button-wrapper\">\n    <i\n      [ngClass]=\"{ listening: listening === true }\"\n      class=\"pi pi-circle-on\"\n      (click)=\"micTap()\"\n    ></i>\n  </div>\n\n  <audate-quick-settings\n    [ngClass]=\"{ 'show-settings': showSettings === true }\"\n  ></audate-quick-settings>\n\n  <div id=\"more-button-wrapper\">\n    <button style=\"visibility: hidden\">Voice Search</button>\n    <i\n      (click)=\"onGearTap()\"\n      [ngClass]=\"{\n        'pi-angle-up': showSettings === true,\n        'pi-angle-down': showSettings === false\n      }\"\n      class=\"pi\"\n    ></i>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Logger } from 'src/app/services/logging/logger';\nimport { LoggingService } from 'src/app/services/logging/logging.service';\nimport { applyConfig, DefaultConfig } from '../audio-waves/audio-wave';\n\n@Component({\n  selector: 'audate-onboarding',\n  templateUrl: './onboarding.component.html',\n  styleUrls: ['./onboarding.component.scss'],\n})\nexport class OnboardingComponent {\n  steps = ['hello', 'world'];\n  notice = \"\";\n  headerWave = DefaultConfig;\n  footerWave = DefaultConfig;\n  logger: Logger;\n\n  /*\n   * TODO: Use InputDeviceService.getDefaultInputDevice to check that there is a microphone.\n   * Display a notice if none.\n   */\n  constructor(loggingService: LoggingService) {\n    this.logger = loggingService.getLogger(\"onboarding\");\n\n    this.headerWave = applyConfig({\n      width: 0,\n      height: 30,\n      nodeCount: 70,\n      opaqueColor: '#410ff8',\n    });\n\n    this.footerWave = applyConfig({\n      width: 0,\n      height: 20,\n      opaqueColor: '#410ff8',\n      rotation: 180,\n      nodeCount: 180,\n    });\n  }\n\n  requestPermission() {\n    navigator.mediaDevices\n      .getUserMedia({ video: false, audio: true })\n      .then((stream) => {\n        stream.getTracks().forEach((track) => {\n          track.stop();\n        });\n        this.notice = 'Permission Granted';\n      })\n      .catch((err) => {\n        /*\n         * TODO: Handle errors:\n         *\n         * Chrome error messages.\n         * err: DOMException: Permission denied\n         * err: DOMException: Permission dismissed\n         * err: DOMException: Permission denied by system // browser doesn't have access\n         *\n         * Firefox:\n         * err: DOMException: The request is not allowed by the user agent or the platform in the current context.\n         * err: DOMException: The object can not be found here - (the browser doesn't have mic permission).\n         *\n         * Safari:\n         * err: NotAllowedError: The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.\n         *\n         */\n        this.logger.error('Error requesting permission ', err);\n        this.notice = 'Permission not granted';\n      });\n  }\n}\n","<div class=\"header\">\n  <div class=\"logo\">\n    <img src=\"assets/images/audate-logo.png\" />\n  </div>\n  <h1>welcome <br />to increased<br /><i>productivity</i></h1>\n</div>\n<audate-audio-waves [config]=\"headerWave\"></audate-audio-waves>\n<div class=\"content\">\n  <div class=\"pin-extension\">\n    <h2>Step 1: Pin the extension</h2>\n    <p>The browser icon is the only way of interacting with this extension, pinning it makes it accessible. </p>\n    <img src=\"assets/images/pin-audate.gif\" alt=\"Pin Audate Extension\" />\n    <div>\n      <ol>\n        <li>Click on the extensions icon.</li>\n        <li>Find Audate in the list of extensions.</li>\n        <li>Click on the pin icon on the right of Audate icon.</li>\n      </ol>\n    </div>\n  </div>\n  <div id=\"mic-permission\">\n    <h2>Step 2: Grant microphone permission</h2>\n    <p>This permission is <i>necessary</i> to record audio and convert it to search query.</p>\n    <img src=\"assets/images/mic-permission.png\" alt=\"Grant Microphone Permission\" />\n    <p><button pRipple class=\"p-button\" (click)=\"requestPermission()\">\n        Click to Grant permission\n      </button>\n    </p>\n    <p>{{ notice }}</p>\n  </div>\n  <div class=\"configure-options\">\n    <h2>Step 3: Configure the extension</h2>\n    <p>You set the language you speak, search engine to use and other properties below.</p>\n    <audate-voice-search></audate-voice-search>\n  </div>\n</div>\n<audate-audio-waves [config]=\"footerWave\"></audate-audio-waves>\n<div class=\"footer\">\n  <img width=\"70px\" src=\"assets/images/audate-logo.png\" />\n  <div>\n    <a href=\"https://audate.app\">About Audate</a> <br />\n    <a href=\"mailto:dev@justiceo.com\">Contact Us</a>\n  </div>\n</div>","import { Component } from '@angular/core';\nimport { Logger } from 'src/app/services/logging/logger';\nimport { LoggingService } from 'src/app/services/logging/logging.service';\n\n@Component({\n  selector: 'audate-permission-request',\n  templateUrl: './permission-request.component.html',\n  styleUrls: ['./permission-request.component.scss'],\n})\nexport class PermissionRequestComponent {\n  notice = '';\n  logger: Logger;\n  constructor(loggingService: LoggingService) {\n    this.logger = loggingService.getLogger('permission-request');\n  }\n\n  /*\n   * Also request permissions to display popups,\n   * This is necessary for opening search from content script.\n   */\n  requestPermission() {\n    navigator.mediaDevices\n      .getUserMedia({ video: false, audio: true })\n      .then((stream) => {\n        stream.getTracks().forEach((track) => {\n          track.stop();\n          // Wait a second then close the tab.\n          setTimeout(() => {\n            window.close();\n          }, 2000);\n        });\n        this.notice = 'Permission Granted';\n      })\n      .catch((err) => {\n        /*\n         * TODO: Handle errors:\n         *\n         * Chrome error messages.\n         * err: DOMException: Permission denied\n         * err: DOMException: Permission dismissed\n         * err: DOMException: Permission denied by system // browser doesn't have access\n         *\n         * Firefox:\n         * err: DOMException: The request is not allowed by the user agent or the platform in the current context.\n         * err: DOMException: The object can not be found here - (the browser doesn't have mic permission).\n         *\n         * Safari:\n         * err: NotAllowedError: The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.\n         *\n         */\n        this.logger.error('Error requesting permission ', err);\n        this.notice = 'Permission not granted';\n      });\n  }\n}\n","<!-- Split the page into two and on the left\n - show the popup permission icon\n - show the blocked mic icon for previously dismissed permission\n - show how to manually enable from site settings.\n - tailor this for firefox\n-->\n<div class=\"wrapper\">\n  <section class=\"logo\">\n    <img src=\"../../../assets/images/logo-128x128.png\" />\n  </section>\n  <section class=\"content\">\n    <p>Audate Voice Search needs microphone access to record audio for transcription.</p>\n    <button pRipple class=\"p-button\" (click)=\"requestPermission()\">\n      Grant permission\n    </button>\n    <p>{{ notice }}</p>\n  </section>\n</div>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport {\n  LocaleProperties,\n  LocalesForDefaultModel,\n  DefaultLocale,\n} from 'src/app/services/locale/locale-properties';\nimport {\n  DefaultSearchEngine,\n  SearchEngine,\n  SearchEngines,\n} from 'src/app/model/search-engine';\nimport { InputDeviceService } from 'src/app/services/input-device.service';\nimport { LocaleService } from 'src/app/services/locale/locale.service';\nimport { SearchEngineService } from 'src/app/services/search-engine.service';\nimport { LoggingService } from 'src/app/services/logging/logging.service';\nimport { Logger } from 'src/app/services/logging/logger';\nimport {\n  LaunchTarget,\n  DefaultLaunchTarget,\n  LaunchTargetService,\n} from 'src/app/services/launch-target.service';\nimport { I18nService } from 'src/app/services/i18n.service';\nimport { Mssg } from 'src/app/services/i18n-mssg';\n\n@Component({\n  selector: 'audate-quick-settings',\n  templateUrl: './quick-settings.component.html',\n  styleUrls: ['./quick-settings.component.scss'],\n})\nexport class QuickSettingsComponent implements OnInit {\n  logger: Logger;\n  locales: LocaleProperties[] = LocalesForDefaultModel;\n  currentLocale: LocaleProperties = DefaultLocale;\n  launchTarget: string;\n  Mssg = Mssg;\n\n  searchEngines: SearchEngine[] = SearchEngines;\n  currentSearchEngine: SearchEngine = DefaultSearchEngine;\n\n  inputDevices: MediaDeviceInfo[] = [];\n  currentInputDevice?: MediaDeviceInfo;\n  NO_DEFAULT_INPUT_DEVICE: MediaDeviceInfo;\n\n  activeSection: string = 'quick-settings';\n\n  constructor(\n    private localeService: LocaleService,\n    private searchEngineService: SearchEngineService,\n    private inputDeviceService: InputDeviceService,\n    private launchTargetService: LaunchTargetService,\n    protected i18n: I18nService,\n    private ref: ChangeDetectorRef,\n    loggingService: LoggingService\n  ) {\n    this.logger = loggingService.getLogger('quick-settings');\n    this.NO_DEFAULT_INPUT_DEVICE = {\n      label: i18n.get(Mssg.QsNoDefaultInput),\n      kind: 'audioinput',\n      groupId: '',\n      deviceId: '',\n      toJSON: function () {\n        throw new Error('Function not implemented.');\n      },\n    };\n    this.launchTarget = this.launchTargetService.toI18n(DefaultLaunchTarget);\n  }\n\n  ngOnInit(): void {\n    this.localeService.getRecognitionLocale().subscribe((locale) => {\n      this.currentLocale = locale;\n      this.ref.detectChanges();\n    });\n\n    this.searchEngineService.getSearchEngine().subscribe((se) => {\n      this.currentSearchEngine = se;\n      this.ref.detectChanges();\n    });\n\n    this.inputDeviceService.getDefaultDevice().then(\n      (d) => {\n        this.inputDevices.push(d);\n        this.currentInputDevice = d;\n        this.ref.detectChanges();\n      },\n      (error) => {\n        this.logger.error(error);\n        if (!this.currentInputDevice) {\n          this.currentInputDevice = this.NO_DEFAULT_INPUT_DEVICE;\n        }\n      }\n    );\n\n    this.launchTargetService.getLaunchTarget().subscribe((lt) => {\n      this.launchTarget = this.launchTargetService.toI18n(lt);\n      this.ref.detectChanges();\n    });\n  }\n\n  setLocale(locale: LocaleProperties): void {\n    this.localeService.setRecognitionLocale(locale);\n  }\n  setSearchEngine(se: SearchEngine): void {\n    this.searchEngineService.setSearchEngine(se);\n  }\n  setLaunchTarget(lt: string): void {\n    if (lt === 'Current Tab') {\n      this.launchTargetService.setLaunchTarget(LaunchTarget.CURRENT_TAB);\n    } else if (lt === 'New Tab') {\n      this.launchTargetService.setLaunchTarget(LaunchTarget.NEW_TAB);\n    }\n  }\n}\n","<section class=\"settings-wrapper\" [hidden]=\"activeSection !== 'quick-settings'\">\n  <div class=\"setting\" (click)=\"activeSection = 'language'\">\n    <h5 class=\"label\">{{ i18n.get(Mssg.QsSpeechLanguage) }}</h5>\n    <p class=\"value\">{{ currentLocale.name }}</p>\n  </div>\n  <hr />\n  <div class=\"setting\" (click)=\"activeSection = 'search-engine'\">\n    <h5 class=\"label\">{{ i18n.get(Mssg.QsSearchEngine) }}</h5>\n    <p class=\"value\">\n      <img src=\"{{ currentSearchEngine.iconPath }}\" />\n      {{ currentSearchEngine.name }}\n    </p>\n  </div>\n  <hr />\n  <div class=\"setting\" (click)=\"activeSection = 'microphone'\">\n    <h5 class=\"label\">{{ i18n.get(Mssg.QsMicrophone) }}</h5>\n    <p class=\"value\">{{ currentInputDevice?.label || \"Default\" }}</p>\n  </div>\n  <hr />\n  <div class=\"setting\" (click)=\"activeSection = 'launch-target'\">\n    <h5 class=\"label\">{{ i18n.get(Mssg.QsLaunchTarget) }}</h5>\n    <p class=\"value\">{{ launchTarget }}</p>\n  </div>\n</section>\n\n<section [hidden]=\"activeSection !== 'language'\" class=\"listbox language-selection\">\n  <p class=\"header\" (click)=\"activeSection = 'quick-settings'\">\n    <i class=\"selected pi pi-angle-left\"></i> {{ i18n.get(Mssg.QsGoBack) }}\n  </p>\n  <div class=\"items\">\n    <p class=\"item\" *ngFor=\"let locale of locales\" (click)=\"setLocale(locale); activeSection = 'quick-settings'\">\n      <span class=\"label\">{{ locale.name }}</span>\n      <i class=\"selected pi pi-check\" *ngIf=\"locale === currentLocale\"></i>\n    </p>\n  </div>\n</section>\n\n<section [hidden]=\"activeSection !== 'search-engine'\" class=\"listbox search-engine-selection\">\n  <p class=\"header\" (click)=\"activeSection = 'quick-settings'\">\n    <i class=\"selected pi pi-angle-left\"></i> {{ i18n.get(Mssg.QsGoBack) }}\n  </p>\n  <div class=\"items\">\n    <p class=\"item\" *ngFor=\"let se of searchEngines\" (click)=\"setSearchEngine(se); activeSection = 'quick-settings'\">\n      <img src=\"{{ se.iconPath }}\" />\n      <span class=\"label\">{{ se.name }}</span>\n      <i class=\"selected pi pi-check\" *ngIf=\"se === currentSearchEngine\"></i>\n    </p>\n  </div>\n</section>\n\n<section [hidden]=\"activeSection !== 'microphone'\" class=\"listbox microphone-selection\">\n  <p class=\"header\" (click)=\"activeSection = 'quick-settings'\">\n    <i class=\"selected pi pi-angle-left\"></i> {{ i18n.get(Mssg.QsGoBack) }}\n  </p>\n  <div class=\"items\">\n    <p class=\"item\" *ngFor=\"let device of inputDevices\" (click)=\"activeSection = 'quick-settings'\">\n      <span class=\"label\">{{ device.label || \"Default\" }}</span>\n      <i class=\"selected pi pi-check\" *ngIf=\"device === currentInputDevice\"></i>\n    </p>\n  </div>\n  <p *ngIf=\"inputDevices.length > 1\" class=\"notice\">\n    {{ i18n.get(Mssg.QsCannotChangeMic) }}\n  </p>\n</section>\n\n<section [hidden]=\"activeSection !== 'launch-target'\" class=\"listbox launch-target-selection\">\n  <p class=\"header\" (click)=\"activeSection = 'quick-settings'\">\n    <i class=\"selected pi pi-angle-left\"></i> {{ i18n.get(Mssg.QsGoBack) }}\n  </p>\n  <div class=\"items\">\n    <p class=\"item\" (click)=\"setLaunchTarget('Current Tab'); activeSection = 'quick-settings'\">\n      <span class=\"label\">{{ i18n.get(Mssg.QsLaunchCurrentTab) }}</span>\n      <i class=\"selected pi pi-check\" *ngIf=\"launchTarget === 'Current Tab'\"></i>\n    </p>\n    <p class=\"item\" (click)=\"setLaunchTarget('New Tab'); activeSection = 'quick-settings'\">\n      <span class=\"label\">{{ i18n.get(Mssg.QsLaunchNewTab) }}</span>\n      <i class=\"selected pi pi-check\" *ngIf=\"launchTarget === 'New Tab'\"></i>\n    </p>\n  </div>\n</section>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { Mssg } from 'src/app/services/i18n-mssg';\nimport { I18nService } from 'src/app/services/i18n.service';\nimport { State } from 'src/app/services/recognition/recognition-state';\nimport { RecognitionService } from 'src/app/services/recognition/recognition.service';\n\n@Component({\n  selector: 'audate-transcript',\n  templateUrl: './transcript.component.html',\n  styleUrls: ['./transcript.component.scss'],\n})\nexport class TranscriptComponent implements OnInit {\n  idleMessage = this.i18n.get(Mssg.StatusIdle);\n  idleTimeoutMs = 2000;\n  idleTimeout?: any | null = null;\n  message?: string = this.idleMessage;\n\n  constructor(\n    private speechRecognizer: RecognitionService,\n    private i18n: I18nService,\n    private ref: ChangeDetectorRef\n  ) { }\n\n  ngOnInit(): void {\n    this.speechRecognizer.getRecognitionState().subscribe((rstate) => {\n      clearTimeout(this.idleTimeout);\n      switch (rstate.state) {\n        case State.START:\n          this.message = this.i18n.get(Mssg.StatusListening);\n          break;\n        case State.TRANSCRIBING:\n          if (rstate.transcript?.partialText) {\n            this.message = rstate.transcript?.partialText;\n          }\n          break;\n        case State.END:\n          // Do nothing.\n          break;\n        case State.IDLE:\n          if (this.message !== this.idleMessage) {\n            this.idleTimeout = setTimeout(() => {\n              this.message = this.idleMessage;\n              this.ref.detectChanges();\n            }, this.idleTimeoutMs);\n          }\n          break;\n        case State.NOT_SUPPORTED:\n        case State.PERMISSION_NOT_GRANTED:\n        case State.NO_AUDIO_INPUT_DEVICE:\n        case State.NO_CONNECTION:\n        case State.NO_SPEECH_DETECTED:\n        case State.ABORTED:\n        case State.LANGUAGE_NOT_SUPPORTED:\n        case State.SERVICE_NOT_ALLOWED:\n          this.message = rstate.errorMessage;\n      }\n      this.ref.detectChanges();\n    });\n  }\n}\n","<div id=\"audate-transcript\">\n  <p class=\"message\">{{ message }}</p>\n</div>\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { SearchEngineService } from 'src/app/services/search-engine.service';\nimport { State } from '../../services/recognition/recognition-state';\nimport { RecognitionService } from '../../services/recognition/recognition.service';\nimport { applyConfig, DefaultConfig } from '../audio-waves/audio-wave';\n\n@Component({\n  selector: 'audate-voice-search',\n  templateUrl: './voice-search.component.html',\n  styleUrls: ['./voice-search.component.scss'],\n})\nexport class VoiceSearchComponent implements OnInit {\n  finalTrascript?: string;\n  waveConfig = DefaultConfig;\n\n  constructor(\n    private speechRecognizer: RecognitionService,\n    private searchEngineService: SearchEngineService,\n    private ref: ChangeDetectorRef\n  ) {\n    this.waveConfig.rotation = 180;\n  }\n\n  ngOnInit(): void {\n    this.speechRecognizer.getRecognitionState().subscribe((rstate) => {\n      switch (rstate.state) {\n        case State.START:\n          this.finalTrascript = undefined;\n          this.waveConfig = applyConfig({ nodeCount: 10, rotation: 180 });\n          break;\n        case State.TRANSCRIBING:\n          if (rstate.transcript?.finalText) {\n            this.finalTrascript = rstate.transcript?.finalText;\n          }\n          if (rstate.transcript?.partialText) {\n            if (this.waveConfig.nodeCount != 20) {\n              this.waveConfig = applyConfig({ nodeCount: 20, rotation: 180 });\n            }\n          }\n          break;\n        case State.END:\n          this.waveConfig = applyConfig({ nodeCount: 2, rotation: 180 });\n          break;\n        case State.IDLE:\n          if (this.finalTrascript) {\n            this.searchEngineService.performSearch(this.finalTrascript);\n            setTimeout( () => window.close(), 1000);\n          }\n          this.finalTrascript = undefined;\n          this.waveConfig = applyConfig({ nodeCount: 2, rotation: 180 });\n      }\n    });\n  }\n}\n","<div id=\"audate-voice-search\">\n  <section>\n    <audate-transcript></audate-transcript>\n  </section>\n  <section class=\"waves\">\n    <audate-audio-waves [config]=\"waveConfig\"></audate-audio-waves>\n  </section>\n  <section>\n    <audate-input-plate></audate-input-plate>\n  </section>\n</div>\n","export interface SearchEngine {\n  name: string;\n  queryTemplate: string;\n  iconPath: string;\n}\n\n// TODO: Add default provider: https://developer.chrome.com/docs/extensions/reference/search/\nexport const SearchEngines: SearchEngine[] = [\n  {\n    name: 'Google',\n    queryTemplate: 'https://google.com/search?q=%QUERY%',\n    iconPath: 'assets/icons/google.svg',\n  },\n  {\n    name: 'Bing',\n    queryTemplate: 'https://www.bing.com/search?q=%QUERY%',\n    iconPath: 'assets/icons/bing.svg',\n  },\n  {\n    name: 'Baidu',\n    queryTemplate: 'https://www.baidu.com/s?wd=%QUERY%',\n    iconPath: 'assets/icons/baidu.svg',\n  },\n  {\n    name: 'Yahoo!',\n    queryTemplate: 'https://search.yahoo.com/search?p=%QUERY%',\n    iconPath: 'assets/icons/yahoo.svg',\n  },\n  {\n    name: 'Yandex',\n    queryTemplate: 'https://yandex.com/search/?text=%QUERY%',\n    iconPath: 'assets/icons/yandex.svg',\n  },\n  {\n    name: 'DuckDuckGo',\n    queryTemplate: 'https://duckduckgo.com/?q=%QUERY%',\n    iconPath: 'assets/icons/duckduckgo.svg',\n  },\n  {\n    name: 'Ecosia',\n    queryTemplate: 'https://www.ecosia.org/search?q=%QUERY%',\n    iconPath: '',\n  },\n];\n\nexport const DefaultSearchEngine = SearchEngines[0];\n","import { Injectable } from '@angular/core';\n\ndeclare const window: any;\nwindow.dataLayer = window.dataLayer || [];\nfunction gtag(...args: any[]) { window.dataLayer.push(...args); }\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AnalyticsService {\n  constructor() {\n    gtag('js', new Date());\n    // The chrome dashboard uses legacy, UA-41478922-4.\n    gtag('config', 'G-2VCZGVT0KN');\n  }\n\n  logStart(event: string): void {\n    gtag('event', event, {\n      type: \"start\",\n    });\n  }\n\n  logMilestone(event: string): void {\n    gtag('event', event, {\n      type: \"milestone\",\n    });\n  }\n\n  logEnd(event: string, status: string): void {\n    gtag('event', event, {\n      type: \"end\",\n      status: status,\n    });\n  }\n}\n","\nexport class Mssg {\n    /*\n     * The string values need to match a corresponding key in messages.json.\n     * To use the keys in manifest.json or CSS files, add \"__MSG__\" prefix and \"__\" suffix.\n     */\n    static AppName = \"AppName\";\n    static AppDesc = \"AppDesc\";\n    static StatusListening = \"StatusListening\";\n    static StatusIdle = \"StatusIdle\";\n\n    static ErrNoSoundDetected = \"ErrNoSoundDetected\";\n    static ErrNoSpeechDetected = \"ErrNoSpeechDetected\";\n    static ErrNoAudioCapture = \"ErrNoAudioCapture\";\n    static ErrPermissionNotGranted = \"ErrPermissionNotGranted\";\n    static ErrNoNetwork = \"ErrNoNetwork\";\n    static ErrAborted = \"ErrAborted\";\n    static ErrLangNotSupported = \"ErrLangNotSupported\";\n    static ErrServiceNotAllowed = \"ErrServiceNotAllowed\";\n    static ErrBadGrammer = \"ErrBadGrammer\";\n    static ErrUnhandledError = \"ErrUnhandledError\";\n\n    static QsGoBack = \"QsGoBack\";\n    static QsSpeechLanguage = \"QsSpeechLanguage\";\n    static QsSearchEngine = \"QsSearchEngine\";\n    static QsMicrophone = \"QsMicrophone\";\n    static QsLaunchTarget = \"QsLaunchTarget\";\n    static QsLaunchNewTab = \"QsLaunchNewTab\";\n    static QsLaunchCurrentTab = \"QsLaunchCurrentTab\";\n    static QsCannotChangeMic = \"QsCannotChangeMic\";\n    static QsNoDefaultInput = \"QsNoDefaultInput\";\n}","import { Injectable } from '@angular/core';\nimport { Logger } from './logging/logger';\nimport { LoggingService } from './logging/logging.service';\nimport * as enMessage from '../../_locales/en/messages.json';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class I18nService {\n  i18n: any[] = [];\n  logger: Logger;\n\n  constructor(loggingService: LoggingService) {\n    this.logger = loggingService.getLogger('i18n.service');\n  }\n\n  get(key: string): string {\n    if (chrome?.i18n) {\n      return chrome.i18n.getMessage(key);\n    }\n\n    this.logger.warn(\n      'chrome.i18n is not available in the current context, trying en-US as fallback'\n    );\n    Object.keys(enMessage).forEach((k) => {});\n    for (const [translationKey, translatedText] of Object.entries(enMessage)) {\n      if (translationKey === key) {\n        return translatedText['message'];\n      }\n    }\n\n    this.logger.error('No translation available for key', key);\n    return key;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Logger } from './logging/logger';\nimport { LoggingService } from './logging/logging.service';\n\n/** Provide abstraction for audio input devices. */\n@Injectable({\n  providedIn: 'root',\n})\nexport class InputDeviceService {\n  logger: Logger;\n  constructor(loggingService: LoggingService) {\n    this.logger = loggingService.getLogger('InputDevService');\n  }\n\n  getInputDevices(): Promise<MediaDeviceInfo[]> {\n    return navigator.mediaDevices.enumerateDevices().then((devices) => {\n      const inputDevices = devices.filter(\n        (device) => device.kind === 'audioinput'\n      );\n\n      // Remove the default device's normal input from this list.\n      const defaultInputDevice = inputDevices.find(\n        (d) => d.deviceId == 'default'\n      );\n      if (!defaultInputDevice) {\n        return inputDevices;\n      }\n      return inputDevices.filter(\n        (d) => d.groupId != defaultInputDevice?.groupId\n      );\n    });\n  }\n\n  getDefaultDevice(): Promise<MediaDeviceInfo> {\n    return navigator.mediaDevices.enumerateDevices().then(\n      (devices) => {\n        const device = devices.find((d) => d.deviceId == 'default');\n        if (device) {\n          return device;\n        } else {\n          this.logger.warn(\n            'Default device not found in devices list: ',\n            devices\n          );\n          const audioInputDevices = devices.filter(d => d.kind === 'audioinput');\n          const firstInputDevice = audioInputDevices.length > 0 ? audioInputDevices[0] : null;\n          if (firstInputDevice) {\n            return firstInputDevice;\n          }\n          throw 'Input device not found';\n        }\n      },\n      (error) => {\n        throw error;\n      }\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, share, Subject } from 'rxjs';\nimport { Mssg } from './i18n-mssg';\nimport { I18nService } from './i18n.service';\nimport { Logger } from './logging/logger';\nimport { LoggingService } from './logging/logging.service';\nimport { StorageService } from './storage/storage.service';\n\n// How/where to open the URL\nexport enum LaunchTarget {\n  CURRENT_TAB = \"Current Tab\",\n  NEW_TAB = \"New Tab\",\n}\n\n// Open in \"New Tab\" by default, as it is non disruptive.\nexport const DefaultLaunchTarget = LaunchTarget.CURRENT_TAB;\n\n/** Provide abstraction for target for opening URLs. */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LaunchTargetService {\n  logger: Logger;\n  currentLaunchTarget = DefaultLaunchTarget;\n  currentLaunchTarget$: Subject<LaunchTarget> = new Subject();\n  constructor(\n    private storageService: StorageService,\n    private i18n: I18nService,\n    loggingService: LoggingService) {\n    this.logger = loggingService.getLogger('LaunchTargetService');\n\n    // Emit value from store as initial value.\n    this.getSavedLaunchTarget().then(lt => this.currentLaunchTarget$.next(lt));\n  }\n\n  getLaunchTarget(): Observable<LaunchTarget> {\n    return this.currentLaunchTarget$.asObservable().pipe(share());\n  }\n\n  toI18n(lt: LaunchTarget): string {\n    switch (lt) {\n      case LaunchTarget.CURRENT_TAB:\n        return this.i18n.get(Mssg.QsLaunchCurrentTab);\n      case LaunchTarget.NEW_TAB:\n        return this.i18n.get(Mssg.QsLaunchNewTab);\n    }\n  }\n\n  getSavedLaunchTarget(): Promise<LaunchTarget> {\n    return this.storageService.get('launch_target').then(\n      (lt: any) => {\n        if (!lt) {\n          return DefaultLaunchTarget;\n        }\n        return lt as LaunchTarget;\n      },\n      (errorReason) => {\n        this.logger.error(\n          'Failed to fetch launch target due to error: ',\n          errorReason\n        );\n        this.logger.warn('Using default launch target instead');\n        return DefaultLaunchTarget;\n      }\n    );\n  }\n\n  setLaunchTarget(lt: LaunchTarget) {\n    this.storageService.put('launch_target', lt).then(\n      () => {\n        this.currentLaunchTarget$.next(lt);\n      },\n      (error) => {\n        this.logger.error(error);\n      }\n    );\n  }\n\n}\n\n","import locales from './locale.json';\n\n/*\n * All supported locales for STT - https://cloud.google.com/speech-to-text/docs/languages\n * https://docs.google.com/spreadsheets/d/109VdbrRIMspIdKzrcxb6tEG0TxJhwfGLU6pex4Y8zrM/edit#gid=0\n */\nexport type LocaleProperties = {\n  name: string;\n  bcp_47: string;\n  model:\n    | 'Default'\n    | 'Command and search'\n    | 'Phone call'\n    | 'Enhanced phone call'\n    | 'Medical Dictation'\n    | 'Medical Conversation'\n    | 'Enhanced video';\n  automatic_punctuation: '' | '';\n  diarization: '' | '';\n  boost: '' | '';\n  word_level_confidence: '' | '';\n  profanity_filter: '' | '';\n  spoken_punctuation: '' | '';\n  spoken_emojis: '' | '';\n};\n\nconst SupportedLocalesAndProperties: LocaleProperties[] =\n  locales as LocaleProperties[];\n\nexport const LocalesForDefaultModel = SupportedLocalesAndProperties.filter(\n  (l: LocaleProperties) => l.model === 'Default'\n);\nexport const DefaultLocale = LocalesForDefaultModel.filter(\n  (l: LocaleProperties) => l.bcp_47 === 'en-US'\n)[0];\n","import { Injectable } from '@angular/core';\nimport { Observable, share, Subject } from 'rxjs';\nimport {\n  LocaleProperties,\n  LocalesForDefaultModel,\n  DefaultLocale,\n} from './locale-properties';\nimport { Logger } from '../logging/logger';\nimport { LoggingService } from '../logging/logging.service';\nimport { StorageService } from '../storage/storage.service';\n\n/**\n * Class for answering locale-related questions\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LocaleService {\n  logger: Logger;\n  localeSubject$ = new Subject<LocaleProperties>();\n  constructor(\n    loggingService: LoggingService,\n    private storageService: StorageService\n  ) {\n    this.logger = loggingService.getLogger('LocaleService');\n\n    // Fetch and broadcast saved locale, set it if not available.\n    this.getSavedLocale().then((locale) => {\n      if (locale) {\n        this.localeSubject$.next(locale);\n      } else {\n        this.setRecognitionLocale(LocaleService.getDefaultLocale());\n      }\n    });\n  }\n  /**\n   * Update the user locale.\n   *\n   * @param {string} locale\n   */\n  setRecognitionLocale(locale: LocaleProperties) {\n    this.storageService.put('voice_recognition_locale', locale).then(\n      () => {\n        this.localeSubject$.next(locale);\n      },\n      (error) => {\n        this.logger.error(error);\n      }\n    );\n  }\n\n  /** Return an observable over locale data. */\n  getRecognitionLocale(): Observable<LocaleProperties> {\n    return this.localeSubject$.asObservable().pipe(share());\n  }\n\n  /**\n   * Get the recognition language.\n   *\n   * If it is not set, set it to default locale.\n   * @return {string} a BCP-47 locale.\n   */\n  private getSavedLocale(): Promise<LocaleProperties> {\n    return this.storageService.get('voice_recognition_locale').then(\n      (locale: any) => {\n        this.logger.log('#getRecognitionLocale() :', locale);\n        return locale as LocaleProperties;\n      },\n      (errorReason) => {\n        this.logger.error('Failed to fetch locale due to error: ', errorReason);\n        this.logger.warn('Using default locale instead');\n        return LocaleService.getDefaultLocale();\n      }\n    );\n  }\n\n  /**\n   * Get the locale from the browser.\n   *\n   * @return {string} a BCP-47 locale.\n   */\n  static getDefaultLocale(): LocaleProperties {\n    let defaultLocale = DefaultLocale;\n\n    /*\n     * Navigator.language returns the preferred language of the user for the browser UI.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/Navigator/language.\n     */\n    let navLocale = undefined;\n    if (navigator.languages !== undefined) {\n      navLocale = LocalesForDefaultModel.find(\n        (l: LocaleProperties) => l.bcp_47 == navigator.languages[0]\n      );\n    } else if (navigator.language) {\n      navLocale = LocalesForDefaultModel.find(\n        (l: LocaleProperties) => l.bcp_47 == navigator.language\n      );\n    } else if (chrome?.i18n) {\n      const i18nLocale = chrome.i18n.getUILanguage();\n      navLocale = LocalesForDefaultModel.find(\n        (l: LocaleProperties) => l.bcp_47 == i18nLocale\n      );\n    }\n\n    if (navLocale) {\n      defaultLocale = navLocale;\n    }\n    return defaultLocale;\n  }\n}\n","import { Logger } from './logger';\n\nexport class ConsoleLogger implements Logger {\n  tag = '';\n\n  constructor(tag: string) {\n    this.tag = tag;\n  }\n\n  debug(...logs: unknown[]) {\n    const d = new Date(Date.now());\n    console.debug(\n      '%c%s %s',\n      'color: blue',\n      `[${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}]`,\n      this.tag,\n      ...logs\n    );\n  }\n\n  log(...logs: unknown[]) {\n    const d = new Date(Date.now());\n    console.log(\n      '%c%s %s',\n      'color: blue',\n      `[${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}]`,\n      this.tag,\n      ...logs\n    );\n  }\n\n  warn(...logs: unknown[]) {\n    const d = new Date(Date.now());\n    console.warn(\n      '%c%s %s',\n      'color: blue',\n      `[${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}]`,\n      this.tag,\n      ...logs\n    );\n  }\n\n  error(...logs: unknown[]) {\n    const d = new Date(Date.now());\n    console.error(\n      '%c%s %s',\n      'color: blue',\n      `[${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}]`,\n      this.tag,\n      ...logs\n    );\n  }\n}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { Logger } from './logger';\nimport { ConsoleLogger } from './console-logger';\nimport { RemoteLogger } from './remote-logger';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoggingService {\n  getLogger(tag: string): Logger {\n    if (isDevMode()) {\n      return new ConsoleLogger(tag);\n    } else {\n      return new RemoteLogger();\n    }\n  }\n}\n","import { Logger } from './logger';\nimport * as Sentry from \"@sentry/angular-ivy\";\n\nexport class RemoteLogger implements Logger {\n  debug(...unused: unknown[]): void {\n    // Ignore these.\n  }\n  log(...unused: unknown[]): void {\n    // Ignore these.\n  }\n  warn(...messages: unknown[]): void {\n    Sentry.captureMessage(messages.join(\",\"));\n  }\n  error(...err: unknown[]): void {\n    Sentry.captureException(err);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, share, Subject } from 'rxjs';\nimport { RecognitionState, State } from './recognition-state';\nimport { DefaultLocale, LocaleProperties } from '../locale/locale-properties';\nimport { LocaleService } from '../locale/locale.service';\nimport { LoggingService } from '../logging/logging.service';\nimport { Logger } from '../logging/logger';\nimport { RecognitionProvider } from './recognition-provider';\nimport { I18nService } from '../i18n.service';\nimport { Mssg } from '../i18n-mssg';\nimport { AnalyticsService } from '../analytics.service';\n\n/*\n * This is a strategy for adding the symbol webkitSpeechRecognition to the window object,\n * Since TypeScript cannot find it.\n */\ninterface IWindow extends Window {\n  // tslint:disable-next-line:no-any\n  webkitSpeechRecognition: any;\n}\n// tslint:disable-next-line:no-any\nconst { webkitSpeechRecognition }: IWindow = window as any as IWindow;\nconst IdleState: RecognitionState = { state: State.IDLE };\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BrowserRecognitionProvider implements RecognitionProvider {\n  recognition!: any;\n  locale: LocaleProperties = LocaleService.getDefaultLocale();\n  recognitionState: RecognitionState = IdleState;\n  recognitionState$: Subject<RecognitionState> = new Subject();\n  detectedSpeech: boolean = false;\n  logger: Logger;\n\n  constructor(\n    private localeService: LocaleService,\n    private analytics: AnalyticsService,\n    private i18n: I18nService,\n    loggingService: LoggingService\n  ) {\n    this.logger = loggingService.getLogger('RecognitionService');\n    localeService.getRecognitionLocale().subscribe({\n      next: (locale) => (this.locale = locale ? locale : this.locale),\n      error: (error) => this.logger.error(error),\n    });\n  }\n\n  #initialize(language: LocaleProperties, isContinuous: boolean): State {\n    /*\n     * When using the chrome recognition API via popup, no special permission is required.\n     * See permsisiosn list here - https://developer.chrome.com/docs/extensions/mv3/declare_permissions/\n     * When accessing on a webpage, microphone access is a required permission. If this extension is installed, it has it.\n     */\n\n    if (!('webkitSpeechRecognition' in window)) {\n      return State.NOT_SUPPORTED;\n    }\n\n    this.recognition = new webkitSpeechRecognition();\n    /*\n     * When disabled, recognition would automatically stop after the first continguous audio streams.\n     * The final transcript is sent one, after #onAudioEnd.\n     */\n    this.recognition.continuous = isContinuous; // TODO: Parameterize.\n    this.recognition.interimResults = true;\n    this.recognition.maxAlternatives = 3;\n    this.recognition.lang = this.locale.bcp_47;\n\n    // Wire up life-cycle methods, in the order they are invoked.\n    this.recognition.onstart = this.#onStart;\n    this.recognition.onaudiostart = this.#onAudioStart;\n    this.recognition.onsoundstart = this.#onSoundStart;\n    this.recognition.onspeechstart = this.#onSpeechStart;\n    this.recognition.onspeechend = this.#onSpeechEnd;\n    this.recognition.onsoundend = this.#onSoundEnd;\n    this.recognition.onaudioend = this.#onAudioEnd;\n    this.recognition.onend = this.#onEnd;\n\n    // Wire up response handlers.\n    this.recognition.onresult = this.#onResult;\n    this.recognition.onerror = this.#onError;\n    return State.IDLE;\n  }\n\n  /**\n   * Fired when the speech recognition service has begun listening to\n   * incoming audio with intent to recognize grammars associated with\n   * the current SpeechRecognition.\n   */\n  #onStart = () => {\n    this.logger.log('#onStart');\n    this.detectedSpeech = false;\n    this.recognitionState = {\n      state: State.START,\n    };\n    this.recognitionState$.next(this.recognitionState);\n    this.analytics.logMilestone(\"#onStart\");\n  };\n\n  /** Fired when the user agent has started to capture audio. */\n  #onAudioStart = () => {\n    this.logger.log('#onAudioStart');\n  };\n\n  /** Fired when any sound  recognizable speech or not  has been detected. */\n  #onSoundStart = () => {\n    this.logger.log('#onSoundStart');\n  };\n\n  /** Fired when sound that is recognized by the speech recognition service as speech has been detected. */\n  #onSpeechStart = () => {\n    this.logger.log('#onSpeechStart');\n    this.analytics.logMilestone(\"#onSpeechStart\");\n  };\n\n  /** Fired when speech recognized by the speech recognition service has stopped being detected. */\n  #onSpeechEnd = () => {\n    this.logger.log('#onSpeechEnd');\n    this.analytics.logMilestone(\"#onSpeechEnd\");\n  };\n\n  /** Fired when any sound  recognizable speech or not  has stopped being detected. */\n  #onSoundEnd = () => {\n    this.logger.log('#onSoundEnd');\n  };\n\n  /** Fired when the user agent has finished capturing audio. */\n  #onAudioEnd = () => {\n    this.logger.log('#onAudioEnd');\n    this.recognitionState = {\n      state: State.END,\n    };\n    this.recognitionState$.next(this.recognitionState);\n\n    if (!this.detectedSpeech) {\n      this.recognitionState = {\n        state: State.NO_SPEECH_DETECTED,\n        errorMessage: this.i18n.get(Mssg.ErrNoSpeechDetected),\n      };\n      this.recognitionState$.next(this.recognitionState);\n    }\n  };\n\n  /**\n   * Fired when the speech recognition service has disconnected.\n   *\n   * This method is guaranteed to be executed, even if #onStart was never called,\n   * and even in instances where #onSpeechEnd or #onAudioEnd are not invoked.\n   */\n  #onEnd = () => {\n    this.logger.log('#onEnd');\n    this.recognitionState = IdleState;\n    this.recognitionState$.next(this.recognitionState);\n    this.recognition = null;\n  };\n\n  /** Fired when a speech recognition error occurs. */\n  #onError = (event: any) => {\n    const eventError: string = event.error;\n    // Not using errorMessage below as it is not very descriptive.\n    switch (eventError) {\n      case 'no-speech':\n        this.recognitionState = {\n          state: State.NO_SPEECH_DETECTED,\n          errorMessage: this.i18n.get(Mssg.ErrNoSoundDetected),\n        };\n        this.analytics.logEnd(\"NO_SPEECH_DETECTED\", \"failure\");\n        break;\n      case 'audio-capture':\n        this.recognitionState = {\n          state: State.NO_AUDIO_INPUT_DEVICE,\n          errorMessage: this.i18n.get(Mssg.ErrNoAudioCapture),\n        };\n        this.analytics.logEnd(\"NO_AUDIO_INPUT_DEVICE\", \"failure\");\n        break;\n      case 'not-allowed':\n        this.recognitionState = {\n          state: State.PERMISSION_NOT_GRANTED,\n          errorMessage: this.i18n.get(Mssg.ErrPermissionNotGranted),\n        };\n        this.analytics.logEnd(\"PERMISSION_NOT_GRANTED\", \"failure\");\n        break;\n      case 'network':\n        this.recognitionState = {\n          state: State.NO_CONNECTION,\n          errorMessage: this.i18n.get(Mssg.ErrNoNetwork),\n        };\n        this.analytics.logEnd(\"NO_CONNECTION\", \"failure\");\n        break;\n      case 'aborted':\n        this.recognitionState = {\n          state: State.ABORTED,\n          errorMessage: this.i18n.get(Mssg.ErrAborted),\n        };\n        this.analytics.logEnd(\"ABORTED\", \"cancel\");\n        break;\n      case 'language-not-supported':\n        this.localeService.setRecognitionLocale(DefaultLocale);\n        this.recognitionState = {\n          state: State.LANGUAGE_NOT_SUPPORTED,\n          errorMessage: this.i18n.get(Mssg.ErrLangNotSupported),\n        };\n        this.analytics.logEnd(\"LANGUAGE_NOT_SUPPORTED\", \"cancel\");\n        break;\n      case 'service-not-allowed':\n        this.recognitionState = {\n          state: State.SERVICE_NOT_ALLOWED,\n          errorMessage: this.i18n.get(Mssg.ErrServiceNotAllowed),\n        };\n        this.analytics.logEnd(\"SERVICE_NOT_ALLOWED\", \"cancel\");\n        break;\n      case 'bad-grammar':\n      default:\n        this.recognitionState = {\n          state: State.UNKNOWN,\n          errorMessage: this.i18n.get(Mssg.ErrUnhandledError),\n        };\n        this.analytics.logEnd(\"UNHANDLED_ERROR\", \"failure\");\n        this.logger.error('#onError unhandled error', eventError, event.message);\n        break;\n    }\n    this.recognitionState$.next(this.recognitionState);\n  };\n\n  /**\n   * Fired when the speech recognition service returns a\n   * result  a word or phrase has been positively recognized\n   * and this has been communicated back to the app.\n   */\n  #onResult = (event: any) => {\n    this.logger.log('#onResult', event);\n    this.detectedSpeech = true;\n    let interimContent = '';\n    let finalContent = '';\n\n    for (let i = event.resultIndex; i < event.results.length; ++i) {\n      if (event.results[i].isFinal) {\n        finalContent += event.results[i][0].transcript;\n        this.recognitionState = {\n          state: State.TRANSCRIBING,\n          transcript: { finalText: finalContent },\n        };\n        this.recognitionState$.next(this.recognitionState);\n      } else {\n        interimContent += event.results[i][0].transcript;\n        this.recognitionState = {\n          state: State.TRANSCRIBING,\n          transcript: { partialText: interimContent },\n        };\n        this.recognitionState$.next(this.recognitionState);\n      }\n    }\n  };\n\n  start(isContinuous: boolean): void {\n    if (this.recognition) {\n      this.logger.log('stopping recognition');\n      this.recognition.abort();\n\n      /*\n       * TODO: Wait for recognition object to become null, i.e. onEnd has fired.\n       * If this function is invoked twice back-to-back, it would fail.\n       */\n    }\n\n    const state = this.#initialize(this.locale, isContinuous);\n    if (state === State.NOT_SUPPORTED) {\n      this.recognitionState = {\n        state: state,\n        errorMessage: this.i18n.get(Mssg.ErrServiceNotAllowed),\n      };\n      this.recognitionState$.next(this.recognitionState);\n      return;\n    }\n\n    this.recognition.start();\n  }\n\n  stop(): void {\n    if (!this.recognition) {\n      this.logger.error(\"Stopping recognition that isn't initialized\");\n      return;\n    }\n\n    // Aborting instead of stopping prevents streaming results after closure.\n    this.recognition.abort();\n  }\n\n  getRecognitionState(): Observable<RecognitionState> {\n    return this.recognitionState$.asObservable().pipe(share());\n  }\n}\n","export interface RecognitionState {\n  state: State;\n  transcript?: Transcript;\n  soundLevel?: number;\n  errorMessage?: string;\n}\n\nexport interface Transcript {\n  finalText?: string;\n  partialText?: string;\n  alternatives?: string[];\n}\n\nexport enum State {\n  UNKNOWN = 'unknown',\n  // Full error-list here - https://wicg.github.io/speech-api/#dom-speechrecognitionerrorcode-service-not-allowed\n  NOT_SUPPORTED = 'not-supported',\n  PERMISSION_NOT_GRANTED = 'permission-not-granted',\n  LANGUAGE_NOT_SUPPORTED = 'language-not-supported',\n  SERVICE_NOT_ALLOWED = 'service-not-allowed',\n  NO_AUDIO_INPUT_DEVICE = 'no-audio-capture',\n  NO_CONNECTION = 'no-connection',\n  NO_SPEECH_DETECTED = 'no-speech-detected',\n  ABORTED = 'aborted',\n\n  IDLE = 'idle',\n  START = 'start',\n  TRANSCRIBING = 'transcribing',\n  END = 'end',\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { RecognitionState } from './recognition-state';\nimport { RecognitionProvider } from './recognition-provider';\nimport { BrowserRecognitionProvider } from './browser-recognition-provider';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RecognitionService implements RecognitionProvider {\n  recognitionProvider: RecognitionProvider;\n\n  constructor(browserProvider: BrowserRecognitionProvider) {\n    this.recognitionProvider = browserProvider;\n    /*\n     * To use Google, uncomment below\n     * this.recognitionProvider = new GoogleRecognitionProvider();\n     */\n  }\n\n  start(isContinuous: boolean): void {\n    this.recognitionProvider.start(isContinuous);\n  }\n\n  stop(): void {\n    this.recognitionProvider.stop();\n  }\n\n  getRecognitionState(): Observable<RecognitionState> {\n    return this.recognitionProvider.getRecognitionState();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, share, Subject } from 'rxjs';\nimport { DefaultSearchEngine, SearchEngine } from '../model/search-engine';\nimport { Logger } from './logging/logger';\nimport { LoggingService } from './logging/logging.service';\nimport { StorageService } from './storage/storage.service';\nimport { LaunchTarget, LaunchTargetService } from './launch-target.service';\nimport { AnalyticsService } from './analytics.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SearchEngineService {\n  logger: Logger;\n  currentSearchEngine = DefaultSearchEngine;\n  currentSearchEngine$: Subject<SearchEngine> = new Subject();\n\n  constructor(\n    private storageService: StorageService,\n    private launchTargetService: LaunchTargetService,\n    private analytics: AnalyticsService,\n    loggingService: LoggingService\n  ) {\n    this.logger = loggingService.getLogger('SearchEngService');\n\n    // Fetch and broadcast saved search engine, set it if not available.\n    this.getSavedSearchEngine().then((se) => {\n      if (se) {\n        this.currentSearchEngine$.next(se);\n      } else {\n        this.setSearchEngine(DefaultSearchEngine);\n      }\n    });\n    // Update currentSearchEngine everytime search engine changes.\n    this.getSearchEngine().subscribe((se) => (this.currentSearchEngine = se));\n  }\n\n  getSearchEngine(): Observable<SearchEngine> {\n    return this.currentSearchEngine$.asObservable().pipe(share());\n  }\n\n  private getSavedSearchEngine(): Promise<SearchEngine> {\n    return this.storageService.get('search_engine').then(\n      (se: any) => {\n        return se as SearchEngine;\n      },\n      (errorReason) => {\n        this.logger.error(\n          'Failed to fetch search engine due to error: ',\n          errorReason\n        );\n        this.logger.warn('Using default search engine instead');\n        return DefaultSearchEngine;\n      }\n    );\n  }\n\n  setSearchEngine(se: SearchEngine) {\n    this.storageService.put('search_engine', se).then(\n      () => {\n        this.currentSearchEngine$.next(se);\n      },\n      (error) => {\n        this.logger.error(error);\n      }\n    );\n  }\n\n  // TODO: Use default provider: https://developer.chrome.com/docs/extensions/reference/search/\n  performSearch(query: string): void {\n    const url = this.currentSearchEngine.queryTemplate.replace(\n      '%QUERY%',\n      query\n    );\n\n    this.launchTargetService.getSavedLaunchTarget().then((lt) => {\n      switch (lt) {\n        case LaunchTarget.CURRENT_TAB:\n          this.openInCurrentTab(url);\n          break;\n        case LaunchTarget.NEW_TAB:\n          this.openInNewTab(url);\n          break;\n        default:\n          this.openInNewTab(url);\n          break;\n      }\n    });\n  }\n\n  openInNewTab(url: string): void {\n    if (!chrome?.tabs) {\n      window.open(url, '_blank');\n      return;\n    }\n    chrome.tabs.create({ url: url, active: true }).then(\n      () => {\n        this.analytics.logEnd('#createNewTab', 'success');\n      },\n      (err) => {\n        this.logger.error('#createTab error', err);\n        this.analytics.logEnd('#createNewTab', 'failure');\n      }\n    );\n  }\n\n  openInCurrentTab(url: string): void {\n    if (!chrome?.tabs) {\n      window.open(url, '_top');\n      return;\n    }\n    chrome.tabs.query({ active: true, currentWindow: true }).then((tabs) => {\n      if (tabs.length !== 1) {\n        this.logger.error(\n          'Wrong number of active tabs, expected 1, got ',\n          tabs.length\n        );\n        this.openInNewTab(url);\n        return;\n      }\n      const tab = tabs[0];\n      if (!tab.id) {\n        this.logger.error(\n          'No tab ID, context is not appropriate to updating tab'\n        );\n        this.openInNewTab(url);\n        return;\n      }\n      chrome.tabs.update(tab.id, { url: url, active: true }).then(\n        () => {\n          this.logger.debug('successfully opened url');\n          this.analytics.logEnd('#updateTab', 'success');\n        },\n        (err) => {\n          this.logger.error('#performSearch: error opening url', err);\n          this.analytics.logEnd('#updateTab', 'failure');\n        }\n      );\n    });\n  }\n}\n","import { StorageProvider } from './storage-provider';\n\n/** Wrapper for chrome.storage.sync. */\nexport class ChromeStorageProvider implements StorageProvider {\n  storageService!: chrome.storage.SyncStorageArea;\n  constructor() {\n    this.storageService = chrome.storage.sync;\n  }\n  put(key: string, value: any): Promise<void> {\n    if (!value) {\n      return Promise.reject('Attempting to save a null value');\n    }\n\n    const data: any = {};\n    data[key] = value;\n    return this.storageService.set(data);\n  }\n\n  async get(key: string): Promise<any> {\n    const response = await this.storageService.get(key);\n    return response[key];\n  }\n\n  getAll(): Promise<any> {\n    return this.storageService.get(null);\n  }\n}\n","import { StorageProvider } from './storage-provider';\n\n/** Fallback storage for development and testing. */\nexport class LocalStorageProvider implements StorageProvider {\n  storageService: Storage;\n  constructor() {\n    this.storageService = window.localStorage;\n  }\n  async put(key: string, value: any): Promise<void> {\n    if (!value) {\n      return Promise.reject('Attempting to save a null value');\n    }\n\n    let audate = await this.getAll();\n    if (audate == null) {\n      audate = {};\n    }\n    audate[key] = value;\n    this.storageService.setItem('audate', JSON.stringify(audate));\n    Promise.resolve();\n  }\n\n  async get(key: string): Promise<any> {\n    const audate = this.storageService.getItem('audate');\n    if (audate == null) {\n      return Promise.resolve(null);\n    }\n    return Promise.resolve(JSON.parse(audate)[key]);\n  }\n\n  getAll(): Promise<any> {\n    const audate = this.storageService.getItem('audate');\n    if (audate == null) {\n      return Promise.resolve(null);\n    }\n    return Promise.resolve(JSON.parse(audate));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ChromeStorageProvider } from './chrome-storage-provider';\nimport { LocalStorageProvider } from './local-storage-provider';\nimport { StorageProvider } from './storage-provider';\n\n/**\n * Provides abstraction over different storage mechanisms and contexts for the app.\n *\n * TODO: Consider using https://github.com/fregante/webext-detect-page/blob/main/index.ts\n * to determine the current page context.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class StorageService implements StorageProvider {\n  storageProvider: StorageProvider;\n  constructor(private router: Router) {\n    if (chrome?.storage) {\n      this.storageProvider = new ChromeStorageProvider();\n    } else {\n      this.storageProvider = new LocalStorageProvider();\n    }\n  }\n\n  put(key: string, value: any): Promise<void> {\n    return this.storageProvider.put(key, value);\n  }\n  get(key: string): Promise<any> {\n    return this.storageProvider.get(key);\n  }\n  getAll(): Promise<any> {\n    return this.storageProvider.getAll();\n  }\n}\n","/*\n * This file can be replaced during build by using the `fileReplacements` array.\n * `ng build` replaces `environment.ts` with `environment.prod.ts`.\n * The list of file replacements can be found in `angular.json`.\n */\n\nexport const environment = {\n  production: false,\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport * as Sentry from '@sentry/angular-ivy';\nimport { BrowserTracing } from '@sentry/tracing';\n\nimport { AppModule } from './app/components/audate-root/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nSentry.init({\n  dsn: 'https://e3cc3436f33741a996dbfdd7f2f3ed59@o526305.ingest.sentry.io/6371071',\n  integrations: [\n    /*\n     * Registers and configures the Tracing integration,\n     * which automatically instruments your application to monitor its\n     * performance, including custom Angular routing instrumentation\n     */\n    new BrowserTracing({\n      routingInstrumentation: Sentry.routingInstrumentation,\n    }),\n  ],\n\n  /*\n   * Set tracesSampleRate to 1.0 to capture 100%\n   * of transactions for performance monitoring.\n   * We recommend adjusting this value in production\n   */\n  tracesSampleRate: 0.1,\n\n  release: 'audate-voice-search@23.01.10',\n  environment: 'PROD',\n});\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n"],"names":["RouterModule","ContentPopupComponent","OnboardingComponent","PermissionRequestComponent","VoiceSearchComponent","AppComponent","routes","path","component","pathMatch","AppRoutingModule","_","_2","_3","forRoot","imports","i1","exports","constructor","router","primengConfig","analytics","loggingService","logger","getLogger","ngOnInit","ripple","addExtensionRedirects","logStart","fragment","window","location","href","split","matchingRoute","config","map","r","find","p","navigateByUrl","skipLocationChange","error","i0","directiveInject","Router","i2","PrimeNGConfig","i3","AnalyticsService","i4","LoggingService","selectors","decls","vars","template","AppComponent_Template","rf","ctx","element","ErrorHandler","BrowserModule","BrowserAnimationsModule","FormsModule","APP_BASE_HREF","ButtonModule","DropdownModule","DialogModule","CardModule","CarouselModule","Sentry","InputPlateComponent","TranscriptComponent","AudioWavesComponent","QuickSettingsComponent","AppModule","injector","trace","ngDoBootstrap","appRef","document","querySelector","bootstrap","inject","Injector","TraceService","provide","useValue","createErrorHandler","showDialog","deps","declarations","AudioWave","waves","init","canvas","context","getContext","console","renderingContext","animationId","cancelAnimationFrame","resizeCanvas","width","rotateCanvas","rotation","screenColors","forEach","color","push","Wave","nodeCount","update","fillStyle","opaqueColor","globalCompositeOperation","fillRect","height","wave","points","point","bounceY","drawWave","requestAnimationFrame","entropy","y","Math","sin","yBase","diff","a","b","beginPath","moveTo","lineTo","x","i","length","quadraticCurveTo","closePath","fill","innerWidth","style","transform","canvasWidth","Point","random","pop","splice","step","DefaultConfig","targetNodeCount","applyConfig","props","Object","assign","audioWave","ngAfterViewInit","canvasView","nativeElement","ngOnChanges","changes","propName","chng","debug","currentValue","previousValue","onResize","unusedEvent","viewQuery","AudioWavesComponent_Query","$event","resolveWindow","consts","ContentPopupComponent_Template","elementStart","elementEnd","property","State","speechRecognizer","ref","listening","showSettings","idleTimeoutMs","getRecognitionState","subscribe","rstate","state","UNKNOWN","NOT_SUPPORTED","PERMISSION_NOT_GRANTED","requestPermissions","LANGUAGE_NOT_SUPPORTED","SERVICE_NOT_ALLOWED","NO_AUDIO_INPUT_DEVICE","NO_CONNECTION","NO_SPEECH_DETECTED","IDLE","ABORTED","END","START","TRANSCRIBING","detectChanges","url","micTap","setTimeout","chrome","runtime","getURL","tabs","create","stop","start","onGearTap","RecognitionService","ChangeDetectorRef","InputPlateComponent_Template","listener","InputPlateComponent_Template_i_click_2_listener","text","InputPlateComponent_Template_i_click_7_listener","advance","pureFunction1","_c0","_c1","pureFunction2","_c2","steps","notice","headerWave","footerWave","requestPermission","navigator","mediaDevices","getUserMedia","video","audio","then","stream","getTracks","track","catch","err","OnboardingComponent_Template","OnboardingComponent_Template_button_click_36_listener","textInterpolate","close","PermissionRequestComponent_Template","PermissionRequestComponent_Template_button_click_6_listener","LocalesForDefaultModel","DefaultLocale","DefaultSearchEngine","SearchEngines","LaunchTarget","DefaultLaunchTarget","Mssg","QuickSettingsComponent_p_30_Template_p_click_0_listener","restoredCtx","restoreView","_r9","locale_r6","$implicit","ctx_r8","nextContext","setLocale","resetView","activeSection","template","QuickSettingsComponent_p_30_i_3_Template","name","ctx_r0","currentLocale","QuickSettingsComponent_p_36_Template_p_click_0_listener","_r13","se_r10","ctx_r12","setSearchEngine","QuickSettingsComponent_p_36_i_4_Template","propertyInterpolate","iconPath","sanitizeUrl","ctx_r1","currentSearchEngine","QuickSettingsComponent_p_42_Template_p_click_0_listener","_r17","ctx_r16","QuickSettingsComponent_p_42_i_3_Template","device_r14","label","ctx_r2","currentInputDevice","textInterpolate1","ctx_r3","i18n","get","QsCannotChangeMic","localeService","searchEngineService","inputDeviceService","launchTargetService","locales","searchEngines","inputDevices","NO_DEFAULT_INPUT_DEVICE","QsNoDefaultInput","kind","groupId","deviceId","toJSON","Error","launchTarget","toI18n","getRecognitionLocale","locale","getSearchEngine","se","getDefaultDevice","d","getLaunchTarget","lt","setRecognitionLocale","setLaunchTarget","CURRENT_TAB","NEW_TAB","LocaleService","SearchEngineService","InputDeviceService","LaunchTargetService","i5","I18nService","i6","QuickSettingsComponent_Template","QuickSettingsComponent_Template_div_click_1_listener","QuickSettingsComponent_Template_div_click_7_listener","QuickSettingsComponent_Template_div_click_14_listener","QuickSettingsComponent_Template_div_click_20_listener","QuickSettingsComponent_Template_p_click_26_listener","QuickSettingsComponent_p_30_Template","QuickSettingsComponent_Template_p_click_32_listener","QuickSettingsComponent_p_36_Template","QuickSettingsComponent_Template_p_click_38_listener","QuickSettingsComponent_p_42_Template","QuickSettingsComponent_p_43_Template","QuickSettingsComponent_Template_p_click_45_listener","QuickSettingsComponent_Template_p_click_49_listener","QuickSettingsComponent_i_52_Template","QuickSettingsComponent_Template_p_click_53_listener","QuickSettingsComponent_i_56_Template","QsSpeechLanguage","QsSearchEngine","QsMicrophone","QsLaunchTarget","QsGoBack","QsLaunchCurrentTab","QsLaunchNewTab","idleMessage","StatusIdle","idleTimeout","message","clearTimeout","StatusListening","transcript","partialText","errorMessage","TranscriptComponent_Template","waveConfig","finalTrascript","undefined","finalText","performSearch","VoiceSearchComponent_Template","queryTemplate","dataLayer","gtag","args","Date","event","type","logMilestone","logEnd","status","factory","fac","providedIn","AppName","AppDesc","_4","_5","ErrNoSoundDetected","_6","ErrNoSpeechDetected","_7","ErrNoAudioCapture","_8","ErrPermissionNotGranted","_9","ErrNoNetwork","_10","ErrAborted","_11","ErrLangNotSupported","_12","ErrServiceNotAllowed","_13","ErrBadGrammer","_14","ErrUnhandledError","_15","_16","_17","_18","_19","_20","_21","_22","_23","enMessage","key","getMessage","warn","keys","k","translationKey","translatedText","entries","getInputDevices","enumerateDevices","devices","filter","device","defaultInputDevice","audioInputDevices","firstInputDevice","share","Subject","storageService","currentLaunchTarget","currentLaunchTarget$","getSavedLaunchTarget","next","asObservable","pipe","errorReason","put","StorageService","SupportedLocalesAndProperties","l","model","bcp_47","localeSubject$","getSavedLocale","getDefaultLocale","log","defaultLocale","navLocale","languages","language","i18nLocale","getUILanguage","ConsoleLogger","tag","logs","now","getHours","getMinutes","getSeconds","isDevMode","RemoteLogger","unused","messages","captureMessage","join","captureException","webkitSpeechRecognition","IdleState","BrowserRecognitionProvider","recognitionState","recognitionState$","detectedSpeech","onStart","onAudioStart","onSoundStart","onSpeechStart","onSpeechEnd","onSoundEnd","onAudioEnd","onEnd","recognition","onError","eventError","onResult","interimContent","finalContent","resultIndex","results","isFinal","initialize","#initialize","isContinuous","continuous","interimResults","maxAlternatives","lang","onstart","onaudiostart","onsoundstart","onspeechstart","onspeechend","onsoundend","onaudioend","onend","onresult","onerror","abort","browserProvider","recognitionProvider","currentSearchEngine$","getSavedSearchEngine","query","replace","openInCurrentTab","openInNewTab","open","active","currentWindow","tab","id","ChromeStorageProvider","storage","sync","value","Promise","reject","data","set","_this","_asyncToGenerator","response","getAll","LocalStorageProvider","localStorage","audate","setItem","JSON","stringify","resolve","_this2","getItem","parse","storageProvider","environment","production","enableProdMode","BrowserTracing","dsn","integrations","routingInstrumentation","tracesSampleRate","release","__NgCli_bootstrap_1","platformBrowser","bootstrapModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}